#number 5
clean_date_str= function(str){
dte_str= readr::parse_character(string)
dte_str =gsub(' ', '-', dte_str)
ymd(dte_str)
}
all_dfs= all_dfs %>%
mutate(START.DATE= sapply(START.DATE, clean_date_str))
all_dfs= all_dfs %>%
mutate(START.DATE= apply(START.DATE, clean_date_str))
?apply
mutate(START.DATE=clean_date_str(START.DATE)
all_dfs$START.DATE
mutate(START.DATE=clean_date_str(START.DATE)
all_dfs= all_dfs %>%
#number 5
clean_date_str= function(str){
dte_str= readr::parse_character(string)
dte_str =gsub(' ', '-', dte_str)
ymd(dte_str)
}
all_dfs= all_dfs %>%
mutate(START.DATE=clean_date_str(START.DATE))
all_dfs= all_dfs %>%
mutate(START.DATE=apply(clean_date_str(START.DATE))
all_dfs= all_dfs %>%
mutate(START.DATE=apply(START.DATE, clean_date_str))
clean_date_str(date)
date= '27 10 3'
clean_date_str(date)
#number 5
clean_date_str= function(str){
dte_str= readr::parse_character(str)
dte_str =gsub(' ', '-', dte_str)
ymd(dte_str)
}
date= '27 10 3'
clean_date_str(date)
all_dfs= all_dfs %>%
mutate(START.DATE=clean_date_str(START.DATE))
all_dfs= all_dfs %>%
mutate(START.DATE=apply(START.DATE, slean_date_str))
all_dfs= all_dfs %>%
mutate(START.DATE=apply(START.DATE, clean_date_str))
all_dfs= all_dfs %>%
mutate(START.DATE=apply(START.DATE, clean_date_str(START.DATE)))
all_dfs$START.DATE= clean_date_str(all_dfs$START.DATE)
#number 5
clean_date_str= function(str){
if (str !='NA'){
dte_str= readr::parse_character(str)
dte_str =gsub(' ', '-', dte_str)
return(ymd(dte_str))}
else{
return('NA')
}
}
date= '27 10 3'
clean_date_str(date)
all_dfs$START.DATE= clean_date_str(all_dfs$START.DATE)
#number 5
clean_date_str= function(str){
if (str !='NA'){
dte_str= readr::parse_character(str)
dte_str =gsub(' ', '-', dte_str)
return(ymd(dte_str))}
else{
return('NA')
}
}
date= 'Na'
clean_date_str(date)
#number 5
clean_date_str= function(str){
if (str !='NA'){
dte_str= readr::parse_character(str)
dte_str =gsub(' ', '-', dte_str)
return(ymd(dte_str))}
else{
return('NA')
}
}
date= '2001-12-12'
clean_date_str(date)
all_dfs$START.DATE= clean_date_str(all_dfs$START.DATE)
all_dfs$START.DATE= clean_date_str(all_dfs$START.DATE)
all_dfs$START.DATE
all_dfs$AMOUNT = readr::parse_number(all_dfs$AMOUNT)
clean_amount= function(str){
if (str !='NA'){
)
clean_amount= function(str){
if (str !='NA'){
dte_str =gsub('$', '', dte_str)
dte_str= gsub(',', '')
return(readr::parse_number(dte_str))
else{
clean_amount= function(str){
if (str !='NA'){
str =gsub('$', '', str)
str= gsub(',', '', str)
return(readr::parse_number(str))
else{
clean_amount= function(str){
if (str !='NA'){
str2 =gsub('$', '', str)
str3= gsub(',', '', str2)
return(readr::parse_number(str))
else{
clean_amount= function(str){
if (str !='NA'){
str2 =gsub('$', '', str)
str3= gsub(',', '', str2)
return(readr::parse_number(str))
}
}
all_dfs$AMOUNT= clean_amount(all_dfs$AMOUNT)
all_dfs$AMOUNT
#Number 7
df_tot= all_dfs
#Number 7
df_tot=all_dfs
#Problem 8
df_tot %>%
group_by(AMOUNT) %>%
summarise(total= sum(AMOUNT))
df_tot= all_dfs
#Problem 8
summarise(df_tot, sum(AMOUNT))
df_tot= all_dfs
?summarise
df-tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= std(COVERAGE.PERIOD))
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= std(COVERAGE.PERIOD))
#Number 9
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= std(COVERAGE.PERIOD))
library(tidyverse)
library(lubridate)
library(dplyr)
#Number 9
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= stand(COVERAGE.PERIOD))
#Number 9
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= std(COVERAGE.PERIOD))
#Number 9
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= sd(COVERAGE.PERIOD))
#Number 9
df_tot %>%
filter(AMOUNT >0) %>%
mutate(COVERAGE.PERIOD= day(END.DATE)-day(START.DATE)) %>%
summarise(std= sd(COVERAGE.PERIOD, na.rm = T))
head(df_tot,5)
#Number 10
df_tot %>%
filter(AMOUNT>0, START.DATE>=year(2010) &
START.DATE<= year(2016)
#Number 10
df_tot %>%
filter(AMOUNT>0, START.DATE >='2010-1-1' &
START.DATE<='2016-12-31
#Number 10
df_tot %>%
filter(AMOUNT>0 & START.DATE >='2010-1-1' &
START.DATE<='2016-12-31
#Number 10
df_tot %>%
filter(AMOUNT>0 & START.DATE >=2010-1-1 &
START.DATE<=2016-12-31
clean_text_col = function(str_lst){
for(str in str_lst){
gsub("-[a-Z]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
}
df_tot$PURPOSE.CLEAN= clean_text_col(df_tot$PURPOSE)
#11
clean_text_col = function(str_lst){
for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
}
df_tot$PURPOSE.CLEAN= clean_text_col(df_tot$PURPOSE)
df_tot$OFFICE.CLEAN= clean_text_col(df_tot$OFFICE)
#11
clean_text_col = function(str_lst){
for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
}
df_tot$PURPOSE.CLEAN= clean_text_col(as.list(df_tot$PURPOSE))
df_tot$OFFICE.CLEAN= clean_text_col(df_tot$OFFICE)
#Problem #12
df1 = df_tot %>%
filter(START.DATE==year(2016))
#Problem #12
df1 = df_tot %>%
filter(START.DATE==START.DATE[year(2016]))
#Problem #12
df1 = df_tot %>%
filter(START.DATE==START.DATE==2016)
#Problem #12
df1 = df_tot %>%
filter(START.DATE==2016)
df1
#Problem #12
df1 = df_tot %>%
filter(START.DATE=='2016')
#Problem #12
df1 = df_tot %>%
filter(START.DATE==year(START.DATE))
df1
#Problem #12
year_start= year(START.DATE)
#Problem #12
year_start= year(df_tot$START.DATE)
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016)
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
summarise(total=sum(AMOUNT))
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
groub_by(PURPOSE.CLEAN) %>%
summarise(total=sum(AMOUNT))
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
groub_by(PURPOSE) %>%
summarise(total=sum(AMOUNT))
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE.CLEAN) %>%
summarise(total=sum(AMOUNT))
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT))
df1
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(max=max(AMOUNT))
df1
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total))
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
head(1)
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total))
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(PURPOSE, OFFICE ) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
df1
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(OFFICE ) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
df1
df2 = inner_join(df1, df_tot, by='OFFICE')
head(df2, 3)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(OFFICE ) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
DF1
DF1
df1
df2
df2 = inner_join(df1, df_tot, by='OFFICE')
df2 %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
OFFICE.NAME = df1$OFFICE
df2
df2 %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
OFFICE.NAME = df1$OFFICE
OFFICE.NAME = names(df2$OFFICE)
OFFICE.NAME
OFFICE.NAME = colnames(df2$OFFICE)
OFFICE.NAME
df2 %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1, PURPOSE)
df2
df2 %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1, PURPOSE)
df2 %>%
group_by(PURPOSE) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1, total)
OFFICE.NAME = colnames(df2$OFFICE[1])
OFFICE.NAME
OFFICE.NAME = row.names(df2$PURPOSE)
OFFICE.NAME
OFFICE.NAME = df1
year= year(df_tot$START.DATE)
#Number 10
year= year(df_tot$START.DATE)
df_tot %>%
filter(AMOUNT>0 &( year_>=2010 &
year<=2016-12-31))
#Number 10
year= year(df_tot$START.DATE)
df_tot %>%
filter(AMOUNT>0 &( year_>=2010 &
year<=2016))
#Number 10
year= year(df_tot$START.DATE)
df3 = df_tot %>%
filter(AMOUNT>0 &( year_>=2010 &
year<=2016))
df3
#Number 10
year= year(df_tot$START.DATE)
df3 = df_tot %>%
filter(AMOUNT>0 &( year_>=2010 &
year<=2016))
#Number 10
#year= year(df_tot$START.DATE)
df3 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>
#Number 10
#year= year(df_tot$START.DATE)
df3 = df_tot %>%
mutate(year2=year(df_tot$START.DATE)) %>
#Number 10
#year= year(df_tot$START.DATE)
df3 = df_tot %>%
mutate(year2=year(df_tot$START.DATE)) %>%
filter(AMOUNT>0 &( year2>=2010 &
year2<=2016))
#Number 10
#year= year(df_tot$START.DATE)
df3 = df_tot %>%
mutate(year2=year(df_tot$START.DATE)) %>%
filter(AMOUNT>0 &( year2>=2010 &
year2<=2016)) %>%
summarise(avg=mean(AMOUNT))
df3
OFFICE.NAME
#11
clean_text_col = function(str_lst){
for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
}
df_tot$PURPOSE.CLEAN= clean_text_col(as.list(df_tot$PURPOSE))
df_tot$OFFICE.CLEAN= clean_text_col(df_tot$OFFICE)
#Problem #12
year_start= year(df_tot$START.DATE)
df1 = df_tot %>%
mutate(year=year(df_tot$START.DATE)) %>%
filter(year==2016) %>%
group_by(OFFICE.CLEAN ) %>%
summarise(total=sum(AMOUNT)) %>%
arrange(desc(total)) %>%
top_n(1)
#df_tot$PURPOSE.CLEAN=
clean_text_col(as.list(df_tot$PURPOSE))
#11
clean_text_col = function(str_lst){
#for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
#df_tot$PURPOSE.CLEAN=
clean_text_col(as.list(df_tot$PURPOSE))
#df_tot$PURPOSE.CLEAN=
clean_text_col(as.list(df_tot$PURPOSE))
df_tot$PURPOSE.CLEAN=clean_text_col(as.list(df_tot$PURPOSE))
clean_text_col = function(str_lst){
#for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
}
df_tot$PURPOSE.CLEAN=clean_text_col(df_tot$PURPOSE)
#11
clean_text_col = function(str_lst){
for(str in str_lst){
gsub("[^...]", '',str)
gsub(' ', '', str)
gsub("' '^", '', str)
gsub("' '$", '', str)
str_to_lower(str)
append(str)
}
return (str)
df_tot$PURPOSE.CLEAN=clean_text_col(as.list(df_tot$PURPOSE))
df_tot$OFFICE.CLEAN= clean_text_col(as.list(df_tot$OFFICE))
